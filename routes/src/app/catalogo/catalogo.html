<app-nav></app-nav>

<section class="productos">
  @for (p of productos(); track p.id) {
    <div class="tarjeta" [ngClass]="{'premium': p.precio > 80000}">
      <div class="img-contenedor">
        <img [src]="p.imagen" [alt]="p.nombre">
      </div>

      <div class="info">
        <h3 class="titulo">{{ p.nombre }}</h3>

        <div class="precio">
          <span class="precio-actual"
                [ngStyle]="{'color': p.cantidad < 50 ? 'red' : '#890b22'}">
            ${{ p.precio }}
          </span>
        </div>

        @switch (true) {
          @case (p.cantidad === 1) {
            <p class="stock-warning">¡Última unidad!</p>
          }
          @case (p.cantidad < 10) {
            <p class="stock-warning">¡Quedan pocas unidades!</p>
          }
          @default {
            <p>Stock disponible</p>
          }
        }

        <button class="btn-carrito"
                [disabled]="p.agregado"
                [ngClass]="{'agregado': p.agregado}"
                (click)="agregar(p)">
          {{ p.agregado ? 'Agregado al carrito' : 'Agregar al carrito' }}
        </button>
      </div>
    </div>
  }
</section>

<app-footer></app-footer>
